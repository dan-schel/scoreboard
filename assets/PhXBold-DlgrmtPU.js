import{z as n,g}from"./PageCenterer-DceqHGeZ.js";import{_ as c}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as d,c as u,a as l}from"./main-BroMhSce.js";const f="scoreboard-matches",_=10,w=n.object({game:n.string(),uuid:n.string(),config:n.unknown(),state:n.unknown(),datetime:n.coerce.date()}),p=w.array();function C(e,t){const i=o().find(s=>s.game===e.id&&s.uuid===t);return i==null?null:m(i,e)}function D(){return o().map(t=>{const a=g.get(t.game);return a==null?{uuid:t.uuid,game:null,error:!0,datetime:t.datetime}:m(t,a)})}function N(e,t){const a={game:e.game.id,uuid:e.uuid,config:e.game.serializeConfig(e.config),state:e.serializeState(t),datetime:new Date(Date.now())},i=o(),s=i.findIndex(r=>r.game===a.game&&r.uuid===a.uuid);s!==-1&&i.splice(s,1),i.unshift(a),h(i)}function o(){const e=localStorage.getItem(f);if(e===null)return[];try{const t=p.parse(JSON.parse(e));return t.sort((a,i)=>i.datetime.getTime()-a.datetime.getTime()),t}catch(t){return console.warn("Failed to load saved matches.",t),[]}}function m(e,t){try{const a=t.deserializeConfig(e.config),i=t.build(a,e.uuid);return{uuid:e.uuid,game:t,instance:i,state:i.deserializeState(e.state),error:!1,datetime:e.datetime}}catch{return{uuid:e.uuid,game:t,error:!0,datetime:e.datetime}}}function h(e){e.sort((t,a)=>a.datetime.getTime()-t.datetime.getTime()),e.splice(_),localStorage.setItem(f,JSON.stringify(e))}function O(e){h(o().filter(t=>t.uuid!==e))}const M={},v={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},x=l("path",{fill:"currentColor",d:"M156 128a28 28 0 1 1-28-28a28 28 0 0 1 28 28M48 100a28 28 0 1 0 28 28a28 28 0 0 0-28-28m160 0a28 28 0 1 0 28 28a28 28 0 0 0-28-28"},null,-1),S=[x];function L(e,t){return d(),u("svg",v,S)}const P=c(M,[["render",L]]),y={},z={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},B=l("path",{fill:"currentColor",d:"M208.49 191.51a12 12 0 0 1-17 17L128 145l-63.51 63.49a12 12 0 0 1-17-17L111 128L47.51 64.49a12 12 0 0 1 17-17L128 111l63.51-63.52a12 12 0 0 1 17 17L145 128Z"},null,-1),T=[B];function b(e,t){return d(),u("svg",z,T)}const F=c(y,[["render",b]]);export{F as P,P as a,C as b,O as d,D as f,N as s};
