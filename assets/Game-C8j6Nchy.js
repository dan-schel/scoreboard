var ae=Object.defineProperty;var se=(o,e,t)=>e in o?ae(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var M=(o,e,t)=>se(o,typeof e!="symbol"?e+"":e,t);import{d as $,o as s,c as r,a as n,t as y,f as S,F as L,i as V,b as f,p as B,h as A,u as d,n as E,g as c,r as w,w as P,e as R,R as T,j as I,k as W,l as D,m as z,q as X,s as re,v as le}from"./main-BroMhSce.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ie,b as ue,c as ce,d as de,e as he,f as pe,h as me,i as _e,T as ve,S as ge,j as fe,k as $e,l as J,P as ye,g as we}from"./PageCenterer-DceqHGeZ.js";import{P as be}from"./PhArrowLeftBold-C6x6ZseE.js";import{P as K,a as Se,b as j,s as ke}from"./PhXBold-DlgrmtPU.js";const Ce=["value"],Ie={key:0,class:"error"},Le=$({__name:"PropIntegerEditor",props:{prop:{},value:{}},emits:["change"],setup(o){return(e,t)=>(s(),r(L,null,[n("input",{type:"text",value:e.value.textValue,onChange:t[0]||(t[0]=a=>e.$emit("change",e.value.withValue(a.target.value)))},null,40,Ce),e.value.error!=null?(s(),r("p",Ie,y(e.value.error),1)):S("",!0)],64))}}),Pe=h(Le,[["__scopeId","data-v-4b675689"]]),Be={key:0,class:"error"},Ae=$({__name:"PropArrayEditor",props:{prop:{},value:{},nestLevel:{}},emits:["change"],setup(o){return(e,t)=>(s(),r(L,null,[(s(!0),r(L,null,V(e.value.items,(a,p)=>(s(),f(Q,{key:p,prop:e.prop.propByIndex(p),value:a,onChange:_=>e.$emit("change",e.value.withElement(p,_)),"nest-level":e.nestLevel+1},null,8,["prop","value","onChange","nest-level"]))),128)),e.value.error!=null?(s(),r("p",Be,y(e.value.error),1)):S("",!0)],64))}}),Me=h(Ae,[["__scopeId","data-v-388c71b6"]]),Ee=o=>(B("data-v-c9873ed2"),o=o(),A(),o),Re={class:"select-wrapper"},Ue=["value","selected"],Te=Ee(()=>n("div",{class:"select-highlight"},[n("div",{class:"select-arrow"})],-1)),Ge={key:0,class:"error"},Ve=$({__name:"PropEnumEditor",props:{prop:{},value:{}},emits:["change"],setup(o){return(e,t)=>(s(),r(L,null,[n("div",Re,[n("select",{onChange:t[0]||(t[0]=a=>e.$emit("change",e.value.withValue(a.target.value)))},[(s(!0),r(L,null,V(e.prop.options,a=>(s(),r("option",{key:a.value,value:a.value,selected:a.value===e.value.value},y(a.label),9,Ue))),128))],32),Te]),e.value.error!=null?(s(),r("p",Ge,y(e.value.error),1)):S("",!0)],64))}}),Oe=h(Ve,[["__scopeId","data-v-c9873ed2"]]),Fe={key:4},De=$({__name:"PropEditor",props:{prop:{},value:{},nestLevel:{}},emits:["change"],setup(o){return(e,t)=>e.prop instanceof d(ie)&&e.value instanceof d(ue)?(s(),f(Y,{key:0,prop:e.prop,value:e.value,onChange:t[0]||(t[0]=a=>e.$emit("change",a)),"nest-level":e.nestLevel},null,8,["prop","value","nest-level"])):e.prop instanceof d(ce)&&e.value instanceof d(de)?(s(),f(Me,{key:1,prop:e.prop,value:e.value,onChange:t[1]||(t[1]=a=>e.$emit("change",a)),"nest-level":e.nestLevel},null,8,["prop","value","nest-level"])):e.prop instanceof d(he)&&e.value instanceof d(pe)?(s(),f(Pe,{key:2,prop:e.prop,value:e.value,onChange:t[2]||(t[2]=a=>e.$emit("change",a))},null,8,["prop","value"])):e.prop instanceof d(me)&&e.value instanceof d(_e)?(s(),f(Oe,{key:3,prop:e.prop,value:e.value,onChange:t[3]||(t[3]=a=>e.$emit("change",a))},null,8,["prop","value"])):(s(),r("p",Fe,"Error: Unhandled prop type."))}}),Q=h(De,[["__scopeId","data-v-f895f5da"]]),He={class:"fields"},je={class:"field-name"},Ze={key:0,class:"error"},qe=$({__name:"PropObjectEditor",props:{prop:{},value:{},nestLevel:{}},emits:["change"],setup(o){return(e,t)=>(s(),r("div",{class:E(["container",{inset:e.nestLevel!=0}])},[n("div",He,[(s(!0),r(L,null,V(e.prop.fields,a=>(s(),r("div",{class:"field",key:a.key},[n("p",je,y(a.displayString)+":",1),c(Q,{prop:a.prop,value:e.value.require(a.key),onChange:p=>e.$emit("change",e.value.withField(a.key,p)),"nest-level":e.nestLevel+1},null,8,["prop","value","onChange","nest-level"])]))),128))]),e.value.error!=null?(s(),r("p",Ze,y(e.value.error),1)):S("",!0)],2))}}),Y=h(qe,[["__scopeId","data-v-3a904aa9"]]),Ne={},We={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},ze=n("path",{fill:"currentColor",d:"m224.49 136.49l-72 72a12 12 0 0 1-17-17L187 140H40a12 12 0 0 1 0-24h147l-51.49-51.52a12 12 0 0 1 17-17l72 72a12 12 0 0 1-.02 17.01"},null,-1),Xe=[ze];function Je(o,e){return s(),r("svg",We,Xe)}const Ke=h(Ne,[["render",Je]]),O=o=>(B("data-v-542aa59f"),o=o(),A(),o),Qe=O(()=>n("p",null,"Back",-1)),Ye=O(()=>n("div",{class:"divider"},null,-1)),xe={class:"configure"},et=O(()=>n("h1",null,"Setup game",-1)),tt={class:"game-name"},nt={type:"submit",class:"play-button"},ot=O(()=>n("p",null,"Play!",-1)),at=$({__name:"ConfigureGame",props:{game:{}},emits:["submit"],setup(o,{emit:e}){const t=o,a=e,p=w(t.game.configWriter.defaultValue());function _(v){p.value=v}function u(v){v.preventDefault();const l=t.game.configWriter.validate(p.value);l.isValid()?a("submit",t.game.configWriter.build(l)):p.value=l}return(v,l)=>(s(),r("div",{class:E(`layout accent-${v.game.color}`)},[c(d(T),{class:"back-button",to:d(R).home()},{default:P(()=>[c(be),Qe]),_:1},8,["to"]),Ye,n("div",xe,[et,n("p",tt,y(v.game.name),1),n("form",{autocomplete:"off",onSubmit:u},[c(Y,{class:"props",prop:v.game.configWriter.configProp,value:p.value,onChange:_,"nest-level":0},null,8,["prop","value"]),n("button",nt,[ot,c(Ke)])],32)])],2))}}),st=h(at,[["__scopeId","data-v-542aa59f"]]);class rt{constructor(e=50){M(this,"_undoStack",[]);M(this,"_redoStack",[]);this.undoLimit=e}push(e){this._undoStack.push(e),this._undoStack.length>this.undoLimit&&this._undoStack.shift(),this._redoStack=[]}canUndo(){return this._undoStack.length>0}canRedo(){return this._redoStack.length>0}undo(e){const t=this._undoStack.pop();return t==null?null:(this._redoStack.push(e),t)}redo(e){const t=this._redoStack.pop();return t==null?null:(this._undoStack.push(e),t)}}class lt{constructor(){M(this,"_changeListeners",[])}addChangeListener(e){this._changeListeners.push(e)}removeChangeListener(e){this._changeListeners=this._changeListeners.filter(t=>t!==e)}notifyChange(){this._changeListeners.forEach(e=>e())}}class F extends lt{constructor(t,a){super();M(this,"_state");M(this,"undoStack",new rt);this.game=t,this._state=a}_editState(t){this.undoStack.push(this._state),this._state=t,this.notifyChange()}getState(){return this._state}canUndo(){return this.undoStack.canUndo()}canRedo(){return this.undoStack.canRedo()}requestUndo(){const t=this.undoStack.undo(this._state);t!=null&&(this._state=t,this.notifyChange())}requestRedo(){const t=this.undoStack.redo(this._state);t!=null&&(this._state=t,this.notifyChange())}getPlayerCount(){return this.game.getPlayerCount()}getScoreType(){return this.game.getScoreType()}do(t){this._editState(this._state.do(t))}}const it=["disabled"],ut=$({__name:"SimpleScoreDisplay",props:{score:{},state:{},playerIndex:{}},emits:["submit-action"],setup(o,{emit:e}){const t=o,a=e,p=I(()=>t.score.canIncrementScore(t.state,t.playerIndex));function _(){const u=t.score.getIncrementAction(t.state,t.playerIndex);a("submit-action",u)}return(u,v)=>(s(),r("button",{onClick:_,disabled:!p.value,class:E(["score-button",`accent-${u.score.getPlayerColor(u.playerIndex)}`])},[n("p",null,y(u.score.getScoreString(u.state,u.playerIndex)),1)],10,it))}}),ct=h(ut,[["__scopeId","data-v-5ec9cb32"]]),dt=o=>(B("data-v-bf64f62b"),o=o(),A(),o),ht=["disabled"],pt={class:"primary"},mt={class:"set-history"},_t={key:0,class:"serve-overlay"},vt=["disabled"],gt=dt(()=>n("div",{class:"fault-status"},[n("p",null,"F")],-1)),ft=[gt],$t=$({__name:"TennisScoreDisplay",props:{score:{},state:{},playerIndex:{}},emits:["submit-action"],setup(o,{emit:e}){const t=o,a=e,p=I(()=>t.score.canIncrementScore(t.state)),_=I(()=>t.score.canFault(t.state,t.playerIndex)),u=I(()=>{if(!t.state.isServing(t.playerIndex))return null;const i=ve.determineServeSide(t.state.player1Score,t.state.player2Score);return{left:"Left",right:"Right"}[i]});function v(){const i=t.score.getIncrementAction(t.playerIndex);a("submit-action",i)}function l(){const i=t.score.getFaultAction();a("submit-action",i)}return(i,k)=>(s(),r("div",{class:E(["container",`accent-${i.score.getPlayerColor(i.playerIndex)}`])},[n("button",{onClick:v,disabled:!p.value,class:"score-button"},[n("p",pt,y(i.score.getPrimaryScoreString(i.state,i.playerIndex)),1),n("p",mt,y(i.score.getSetHistoryString(i.state,i.playerIndex)),1)],8,ht),u.value!=null?(s(),r("div",_t,[n("p",null,"Serve: "+y(u.value),1)])):S("",!0),u.value!=null?(s(),r("button",{key:1,class:E(["fault-button",{"is-fault":i.score.isFault(i.state),p1:i.playerIndex===0,p2:i.playerIndex===1}]),onClick:l,disabled:!_.value},ft,10,vt)):S("",!0)],2))}}),yt=h($t,[["__scopeId","data-v-bf64f62b"]]),wt=$({__name:"ScoreDisplay",props:{score:{},state:{},playerIndex:{}},emits:["submit-action"],setup(o){return(e,t)=>e.score instanceof d(ge)?(s(),f(ct,{key:0,score:e.score,state:e.state,playerIndex:e.playerIndex,onSubmitAction:t[0]||(t[0]=a=>e.$emit("submit-action",a))},null,8,["score","state","playerIndex"])):e.score instanceof d(fe)&&e.state instanceof d($e)?(s(),f(yt,{key:1,score:e.score,state:e.state,playerIndex:e.playerIndex,onSubmitAction:t[1]||(t[1]=a=>e.$emit("submit-action",a))},null,8,["score","state","playerIndex"])):S("",!0)}}),bt={},St={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},kt=n("path",{fill:"currentColor",d:"M236 184a12 12 0 0 1-24 0a84 84 0 0 0-143.4-59.4L53.11 140H88a12 12 0 0 1 0 24H24a12 12 0 0 1-12-12V88a12 12 0 0 1 24 0v35.16l15.66-15.55A108 108 0 0 1 236 184"},null,-1),Ct=[kt];function It(o,e){return s(),r("svg",St,Ct)}const Lt=h(bt,[["render",It]]),Pt={},Bt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},At=n("path",{fill:"currentColor",d:"M244 88v64a12 12 0 0 1-12 12h-64a12 12 0 0 1 0-24h34.9l-15.48-15.37A84 84 0 0 0 44 184a12 12 0 0 1-24 0a108 108 0 0 1 184.37-76.37L220 123.16V88a12 12 0 0 1 24 0"},null,-1),Mt=[At];function Et(o,e){return s(),r("svg",Bt,Mt)}const Rt=h(Pt,[["render",Et]]),Ut={},Tt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Gt=n("path",{fill:"currentColor",d:"m222.14 105.85l-80-80a20 20 0 0 0-28.28 0l-80 80A19.86 19.86 0 0 0 28 120v96a12 12 0 0 0 12 12h64a12 12 0 0 0 12-12v-52h24v52a12 12 0 0 0 12 12h64a12 12 0 0 0 12-12v-96a19.86 19.86 0 0 0-5.86-14.15M204 204h-40v-52a12 12 0 0 0-12-12h-48a12 12 0 0 0-12 12v52H52v-82.35l76-76l76 76Z"},null,-1),Vt=[Gt];function Ot(o,e){return s(),r("svg",Tt,Vt)}const x=h(Ut,[["render",Ot]]),Ft={},Dt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Ht=n("path",{fill:"currentColor",d:"M228 48v48a12 12 0 0 1-12 12h-48a12 12 0 0 1 0-24h19l-7.8-7.8a75.55 75.55 0 0 0-53.32-22.26h-.43a75.5 75.5 0 0 0-53.06 21.63a12 12 0 1 1-16.78-17.16a99.38 99.38 0 0 1 69.87-28.47h.52a99.42 99.42 0 0 1 70.2 29.29L204 67V48a12 12 0 0 1 24 0m-44.39 132.43a75.5 75.5 0 0 1-53.09 21.63h-.43a75.55 75.55 0 0 1-53.32-22.26L69 172h19a12 12 0 0 0 0-24H40a12 12 0 0 0-12 12v48a12 12 0 0 0 24 0v-19l7.8 7.8a99.42 99.42 0 0 0 70.2 29.26h.56a99.38 99.38 0 0 0 69.87-28.47a12 12 0 0 0-16.78-17.16Z"},null,-1),jt=[Ht];function Zt(o,e){return s(),r("svg",Dt,jt)}const ee=h(Ft,[["render",Zt]]),G=o=>(B("data-v-12aa3241"),o=o(),A(),o),qt={class:"menu"},Nt={class:"header"},Wt=G(()=>n("p",null,"Menu",-1)),zt={class:"undo-redo"},Xt=["disabled"],Jt=G(()=>n("p",null,"Undo",-1)),Kt=["disabled"],Qt=G(()=>n("p",null,"Redo",-1)),Yt={class:"other"},xt=G(()=>n("p",null,"Rematch",-1)),en=G(()=>n("p",null,"Leave game",-1)),tn=$({__name:"PlayMenu",props:{canUndo:{type:Boolean},canRedo:{type:Boolean},isGameOver:{type:Boolean},gameId:{},instanceUuid:{}},emits:["undo","redo","earbud-mode","close"],setup(o){return(e,t)=>(s(),r("div",qt,[n("div",Nt,[Wt,n("button",{onClick:t[0]||(t[0]=a=>e.$emit("close"))},[c(K)])]),n("div",zt,[n("button",{onClick:t[1]||(t[1]=a=>e.$emit("undo")),disabled:!e.canUndo},[c(Lt),Jt],8,Xt),n("button",{onClick:t[2]||(t[2]=a=>e.$emit("redo")),disabled:!e.canRedo},[c(Rt),Qt],8,Kt)]),n("div",Yt,[e.isGameOver?(s(),f(d(T),{key:0,to:d(R).rematch(e.gameId,e.instanceUuid)},{default:P(()=>[c(ee),xt]),_:1},8,["to"])):S("",!0),c(d(T),{to:d(R).home()},{default:P(()=>[c(x),en]),_:1},8,["to"])])]))}}),nn=h(tn,[["__scopeId","data-v-12aa3241"]]),on={},an={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},sn=n("path",{fill:"currentColor",d:"M168.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L97 128Z"},null,-1),rn=[sn];function ln(o,e){return s(),r("svg",an,rn)}const un=h(on,[["render",ln]]),cn={},dn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},hn=n("path",{fill:"currentColor",d:"m232.49 80.49l-128 128a12 12 0 0 1-17 0l-56-56a12 12 0 1 1 17-17L96 183L215.51 63.51a12 12 0 0 1 17 17Z"},null,-1),pn=[hn];function mn(o,e){return s(),r("svg",dn,pn)}const _n=h(cn,[["render",mn]]),vn={},gn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},fn=n("path",{fill:"currentColor",d:"m246.81 111.29l-88.18-56.17A19.91 19.91 0 0 0 128 71.84v30L54.63 55.12A19.91 19.91 0 0 0 24 71.84v112.32a19.93 19.93 0 0 0 30.63 16.72L128 154.15v30a19.93 19.93 0 0 0 30.63 16.72l88.18-56.17a19.79 19.79 0 0 0 0-33.42ZM48 176.64V79.36L124.38 128Zm104 0V79.36L228.38 128Z"},null,-1),$n=[fn];function yn(o,e){return s(),r("svg",gn,$n)}const Z=h(vn,[["render",yn]]),wn={},bn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Sn=n("path",{fill:"currentColor",d:"M188 64v128a12 12 0 0 1-24 0V64a12 12 0 0 1 24 0m36-12a12 12 0 0 0-12 12v128a12 12 0 0 0 24 0V64a12 12 0 0 0-12-12m-76 76a19.71 19.71 0 0 1-9.19 16.71l-88.18 56.16A19.91 19.91 0 0 1 20 184.15V71.85a19.91 19.91 0 0 1 30.63-16.72l88.18 56.16A19.71 19.71 0 0 1 148 128m-27.62 0L44 79.37v97.26Z"},null,-1),kn=[Sn];function Cn(o,e){return s(),r("svg",bn,kn)}const q=h(wn,[["render",Cn]]),In={},Ln={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Pn=n("path",{fill:"currentColor",d:"M225.7 54.46a20 20 0 0 0-20.33.66L132 101.85v-30a19.91 19.91 0 0 0-30.63-16.72l-88.18 56.16a19.79 19.79 0 0 0 0 33.42l88.18 56.17A19.91 19.91 0 0 0 132 184.16v-30l73.37 46.73A19.91 19.91 0 0 0 236 184.16V71.84a19.84 19.84 0 0 0-10.3-17.38M108 176.64L31.63 128L108 79.36Zm104 0L135.63 128L212 79.36Z"},null,-1),Bn=[Pn];function An(o,e){return s(),r("svg",Ln,Bn)}const N=h(In,[["render",An]]),b=o=>(B("data-v-92e1eddf"),o=o(),A(),o),Mn={class:"menu"},En={class:"header"},Rn=b(()=>n("p",null,"Earbud Mode",-1)),Un=b(()=>n("p",null," Get audio score updates, and use the play/pause, previous track, and next track controls on your headphones to advance the score. ",-1)),Tn={class:"button-mapping"},Gn=b(()=>n("p",null,"More options",-1)),Vn=b(()=>n("p",null,"Award point to Player 1",-1)),On=b(()=>n("p",null,"Award point to Player 2",-1)),Fn=b(()=>n("hr",null,null,-1)),Dn=b(()=>n("p",null,'After selecting "More options":',-1)),Hn={class:"button-mapping"},jn=b(()=>n("p",null,"Repeat scores/Cancel",-1)),Zn=b(()=>n("p",null,"Fault",-1)),qn=b(()=>n("p",null,"Undo",-1)),Nn={class:"enable-button"},Wn=b(()=>n("p",null,"Enable earbud mode",-1)),zn=$({__name:"EarbudModeMenu",emits:["back","enable"],setup(o){return(e,t)=>(s(),r("div",Mn,[n("div",En,[n("button",{onClick:t[0]||(t[0]=a=>e.$emit("back"))},[c(un)]),Rn]),Un,n("div",Tn,[c(q),Gn,c(Z),Vn,c(N),On]),Fn,Dn,n("div",Hn,[c(q),jn,c(Z),Zn,c(N),qn]),n("button",Nn,[c(_n),Wn])]))}}),Xn=h(zn,[["__scopeId","data-v-92e1eddf"]]),te=o=>(B("data-v-25433ff5"),o=o(),A(),o),Jn={class:"header"},Kn={key:0},Qn={class:"winner-color"},Yn={key:1},xn={class:"actions"},eo=te(()=>n("p",null,"Rematch",-1)),to=te(()=>n("p",null,"Exit to menu",-1)),no=$({__name:"GameOverMenu",props:{winnerColor:{},gameId:{},instanceUuid:{}},emits:["close"],setup(o){return(e,t)=>(s(),r("div",{class:E(["menu",{[`accent-${e.winnerColor}`]:e.winnerColor!=null}])},[n("div",Jn,[e.winnerColor!=null?(s(),r("p",Kn,[n("span",Qn,y(d(J)(e.winnerColor)),1),W(" wins! ")])):(s(),r("p",Yn,"It's a draw!")),n("button",{onClick:t[0]||(t[0]=a=>e.$emit("close"))},[c(K)])]),n("div",xn,[c(d(T),{to:d(R).rematch(e.gameId,e.instanceUuid)},{default:P(()=>[c(ee),eo]),_:1},8,["to"]),c(d(T),{to:d(R).home()},{default:P(()=>[c(x),to]),_:1},8,["to"])])],2))}}),oo=h(no,[["__scopeId","data-v-25433ff5"]]),ao={class:"container"},so={class:"play"},ro={class:"mobile-row"},lo={key:0,class:"score-headline"},io=$({__name:"PlayGame",props:{handler:{},gameId:{},instanceUuid:{}},setup(o){const e=o,t=w(e.handler.getState()),a=w(e.handler.canUndo()),p=w(e.handler.canRedo()),_=w(null),u=w(null),v=I(()=>e.handler.getScoreType()),l=I(()=>t.value.isGameOver()),i=I(()=>{var m;return u.value!=null?null:l.value!==!1?typeof l.value=="object"?`${J(l.value.winner)} wins!`.toUpperCase():"IT'S A DRAW!":(m=t.value.getScoreHeadline())==null?void 0:m.toUpperCase()});function k(){var g;t.value=e.handler.getState(),a.value=e.handler.canUndo(),p.value=e.handler.canRedo(),t.value.isGameOver()!==!1&&(u.value="game-over",(g=_.value)==null||g.showModal())}function ne(){var m;u.value="main",(m=_.value)==null||m.showModal()}function oe(m){l.value===!1&&e.handler.do(m)}return D(()=>e.handler,(m,g)=>{g!=null&&g.removeChangeListener(k),m.addChangeListener(k),k(),u.value=null}),z(()=>{var m;e.handler.addChangeListener(k),(m=_.value)==null||m.addEventListener("close",()=>{u.value=null})}),X(()=>{e.handler.removeChangeListener(k)}),(m,g)=>(s(),r(L,null,[n("div",ao,[n("div",so,[n("div",ro,[i.value!=null?(s(),r("div",lo,[n("p",null,y(i.value),1)])):S("",!0),n("button",{class:"menu-button",onClick:ne},[c(Se)])]),(s(!0),r(L,null,V(m.handler.getPlayerCount(),C=>(s(),r("div",{class:"score",key:C},[c(wt,{score:v.value,state:t.value,playerIndex:C-1,onSubmitAction:oe},null,8,["score","state","playerIndex"])]))),128))])]),n("dialog",{ref_key:"dialogRef",ref:_},[u.value==="earbud-mode"?(s(),f(Xn,{key:0,onBack:g[0]||(g[0]=C=>u.value="main")})):u.value==="game-over"?(s(),f(oo,{key:1,"winner-color":typeof l.value=="object"?l.value.winner:null,"game-id":m.gameId,"instance-uuid":m.instanceUuid,onClose:g[1]||(g[1]=C=>{var U;return(U=_.value)==null?void 0:U.close()})},null,8,["winner-color","game-id","instance-uuid"])):(s(),f(nn,{key:2,class:"menu","can-undo":a.value,"can-redo":p.value,"is-game-over":l.value!==!1,"game-id":m.gameId,"instance-uuid":m.instanceUuid,onUndo:g[2]||(g[2]=C=>m.handler.requestUndo()),onRedo:g[3]||(g[3]=C=>m.handler.requestRedo()),onEarbudMode:g[4]||(g[4]=C=>u.value="earbud-mode"),onClose:g[5]||(g[5]=C=>{var U;return(U=_.value)==null?void 0:U.close()})},null,8,["can-undo","can-redo","is-game-over","game-id","instance-uuid"]))],512)],64))}}),uo=h(io,[["__scopeId","data-v-11582345"]]),co=200,ho=$({__name:"GameController",props:{game:{},uuid:{},rematchOf:{}},setup(o){const e=o,t=w(null),a=w(null);D(t,(l,i)=>{i!=null&&i.removeChangeListener(v),l!=null&&(l.addChangeListener(v),v())});function p(){t.value=null;const l=j(e.game,e.uuid);if(l==null)if(e.rematchOf){const i=j(e.game,e.rematchOf);i!=null&&!i.error&&i.game.id===e.game.id?(console.log("Starting rematch:",i.instance.config),u(i.instance.config)):console.warn("Failed to launch rematch.")}else console.log("No saved game found - configuring new game.");else l.error?console.warn("Error loading saved game."):(t.value=new F(l.instance,l.state),console.log("Loaded saved game."))}function _(l){console.log("Game configured:",l),u(l)}function u(l){const i=e.game.build(l,e.uuid),k=i.getInitialState();t.value=new F(i,k)}function v(){a.value!=null&&clearTimeout(a.value),a.value=setTimeout(()=>{const l=t.value;l!=null&&l instanceof F&&(ke(l.game,l.getState()),console.log("Saved game."))},co)}return z(()=>{p()}),X(()=>{a.value!=null&&clearTimeout(a.value),t.value!=null&&t.value.removeChangeListener(v)}),(l,i)=>t.value==null?(s(),f(st,{key:0,game:l.game,onSubmit:_},null,8,["game"])):(s(),f(uo,{handler:t.value,"game-id":l.game.id,"instance-uuid":l.uuid,key:l.uuid},null,8,["handler","game-id","instance-uuid"]))}}),H=o=>(B("data-v-81a10f25"),o=o(),A(),o),po={key:0},mo={key:1,class:"not-found"},_o=H(()=>n("h1",null,"Error 404 - Game not found",-1)),vo=H(()=>n("p",null,"This page doesn't exist, at least not anymore!",-1)),go=H(()=>n("p",null," The game you're looking for might have been renamed or removed. Check the homepage to see which games are available. ",-1)),fo=$({__name:"Game",setup(o){const e=re(),t=w(e.params.game),a=w(e.params.uuid),p=w(e.query.rematch);D([()=>e.params.game,()=>e.params.uuid,()=>e.query.rematch],()=>{t.value=e.params.game,a.value=e.params.uuid,p.value=e.query.rematch});const _=I(()=>we.get(t.value)??null);return(u,v)=>{const l=le("RouterLink");return s(),f(ye,null,{default:P(()=>[_.value!=null?(s(),r("main",po,[(s(),f(ho,{game:_.value,uuid:a.value,"rematch-of":p.value,key:a.value},null,8,["game","uuid","rematch-of"]))])):(s(),r("main",mo,[_o,vo,go,n("p",null,[c(l,{class:"link",to:d(R).home()},{default:P(()=>[W(" Here's a link to the homepage. ")]),_:1},8,["to"])])]))]),_:1})}}}),Co=h(fo,[["__scopeId","data-v-81a10f25"]]);export{Co as default};
